{"id":1015202797,"question_id":363,"lang":"java","lang_name":"Java","time":"10 months, 1 week","timestamp":1691459140,"status":10,"status_display":"Accepted","runtime":"286 ms","url":"/submissions/detail/1015202797/","is_pending":"Not Pending","title":"Max Sum of Rectangle No Larger Than K","memory":"44 MB","code":"class Solution {\n    public int maxSumSubmatrix(int[][] matrix, int k) {\n        int h = matrix.length;\n        int w = matrix[0].length;\n        \n        int max = Integer.MIN_VALUE;\n        \n        \n        if(h<w){\n            \n            int[][] mat = new int[w][h];\n            for(int i=0;i<h; i++){\n                for(int j=0; j<w; j++){\n                    mat[j][i]=matrix[i][j];\n                }\n            }\n            return maxSumSubmatrix(mat, k);\n        }\n        \n        \n     \n        for(int i=0; i<h; i++){\n            \n            int[] row = new int[w];\n            for(int r=i; r<h; r++){\n                \n                for(int j=0;j<w; j++){\n                    row[j]+=matrix[r][j];\n                }\n                \n                max = Math.max(max, helper(row, k));\n            }\n        }\n        \n        return max;\n    }\n    \n    private int helper(int[] row, int k){\n        \n        int w = row.length;\n        int presum=0;\n        \n        // x x x [x x x x x] \n        //.    i          j\n        //        ^^^^^^^^^ no larger than k\n        //       |-> set.ceiling\n        // ^^^^^^^^^^ : val\n        // presum[j] - presum[i]<=k\n        \n        int max = Integer.MIN_VALUE;\n        \n        TreeSet<Integer> set = new TreeSet<>();\n        set.add(0);\n        for(int j=0; j<w; j++){\n            \n            presum += row[j];\n            \n            Integer val = set.ceiling(presum-k);\n            if(val!=null){\n                max = Math.max(max, presum-val);\n            }\n            \n            set.add(presum);\n        }\n        return max;\n        \n        \n        \n    }\n}","compare_result":"111111111111111111111111111111111111","title_slug":"max-sum-of-rectangle-no-larger-than-k","has_notes":false,"flag_type":1}