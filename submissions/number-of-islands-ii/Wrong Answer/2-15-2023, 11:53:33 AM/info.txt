{"id":898227140,"question_id":305,"lang":"java","lang_name":"Java","time":"1 year, 3 months","timestamp":1676433213,"status":11,"status_display":"Wrong Answer","runtime":"N/A","url":"/submissions/detail/898227140/","is_pending":"Not Pending","title":"Number of Islands II","memory":"N/A","code":"class Solution {\n    public List<Integer> numIslands2(int m, int n, int[][] positions) {\n        List<Integer> res = new ArrayList<>();\n        \n        Map<Integer, Set<Integer>> map= new HashMap<>();\n        \n        \n        int land = 0;\n        int mark =1;\n        int[][] grid = new int[m][n];\n        \n        int[][] dirs = new int[][]{{0,1}, {1,0}, {0,-1}, {-1, 0}};        \n        for(int[] p : positions){\n            \n            if(grid[p[0]][p[1]]!=0){\n                res.add(land);\n                continue;\n            }\n                \n            \n            Set<Integer> set = new HashSet<>();\n            for(int[] d : dirs){\n                \n                int r = p[0]+d[0];\n                int c = p[1]+d[1];\n                \n                if(r<0 || r>=m || c<0 || c>=n)\n                    continue;\n                \n                if(grid[r][c]!=0){\n                    set.add(grid[r][c]);\n                }\n            }\n            \n            if(set.size()==0){\n                land++;\n                grid[p[0]][p[1]]=land;\n                \n            }else if(set.size()==1){\n                int adj = set.iterator().next();\n                grid[p[0]][p[1]]=adj;\n                \n            }else if(set.size()>1){\n                \n                int minus = set.size()-1;\n                List<Integer> list = new ArrayList<>(set);\n                int intersec =0, min=Integer.MAX_VALUE;\n                for(int i=0; i<list.size()-1; i++){\n                    for(int j=i+1; j<list.size(); j++){\n                        if(map.containsKey(list.get(i)) && map.get(list.get(i)).contains(list.get(j))){\n                            minus--;\n                        }else{\n                            map.putIfAbsent(list.get(i), new HashSet<>());\n                            map.get(list.get(i)).add(list.get(j));\n                        }\n                        \n                        min = Math.min(min, list.get(i));\n                    }\n                }\n                grid[p[0]][p[1]]=min;\n                land-=minus;                                \n            }\n            \n            // System.out.println(\"grid, set siz=\" + set.size() + \" p=\" + p[0] + \", \"+ p[1]);\n            // for(int i=0; i<m; i++){\n            //     for(int j=0; j<n; j++){\n            //         System.out.print(grid[i][j] + \", \");\n            //     }\n            //     System.out.println();\n            // }\n                \n            \n            res.add(land);\n        }\n        \n        \n        return res;\n        \n        \n    }\n}","compare_result":"111111111111111111111111111111111111111111111111111111111111111111111011111110111011011111101111011111111110110111111110111110111111111111111111000111111011100000","title_slug":"number-of-islands-ii","has_notes":false,"flag_type":1}