{"id":761990164,"question_id":307,"lang":"java","lang_name":"Java","time":"1 year, 10 months","timestamp":1659325326,"status":10,"status_display":"Accepted","runtime":"135 ms","url":"/submissions/detail/761990164/","is_pending":"Not Pending","title":"Range Sum Query - Mutable","memory":"128.5 MB","code":"public class NumArray {\nclass segmentNode{\n    int start;\n    int end;\n    int sum;\n    segmentNode left;\n    segmentNode right;\n    public segmentNode(int start,int end){\n        this.start = start;\n        this.end = end;\n        this.left = null;\n        this.right = null;\n        this.sum = 0;\n    }\n}\n\nsegmentNode node;\nint[] nums;\npublic NumArray(int[] nums) {\n    this.nums = new int[nums.length];\n    for(int i=0;i<nums.length;i++)\n        this.nums[i]=nums[i];\n    this.node = buildtree(nums,0,nums.length-1);\n}\n\nvoid update(int i, int val) {\n    int diff = nums[i]-val;\n    nums[i]=val;\n    if(node!=null)\n        nupdate(node,i,diff);\n}\n\npublic int sumRange(int i, int j) {\n    return node==null?0:sum(node,i,j);\n}\n\npublic segmentNode buildtree(int[] nums,int start,int end){\n    if(start>end)   return null;\n    segmentNode root = new segmentNode(start,end);\n    if(start == end)\n        root.sum = nums[start];\n    else{\n        int mid = start + (end-start)/2;\n        root.left = buildtree(nums,start,mid);\n        root.right = buildtree(nums,mid+1,end);\n        root.sum = root.left.sum+root.right.sum;\n    }\n    return root;\n}\npublic int sum(segmentNode root, int start, int end){\n    if(root==null||start>root.end || end<root.start)    return 0;\n    if(start<=root.start && end>=root.end)  return root.sum;\n    int left = sum(root.left,start,end);\n    int right = sum(root.right,start,end);\n    return left+right;\n}\npublic void nupdate(segmentNode root, int index,int diff){\n    if(root==null||index>root.end||index<root.start)  return;\n    if(index>=root.start && index<=root.end)    root.sum-=diff;\n    nupdate(root.left,index,diff);\n    nupdate(root.right,index,diff);\n}\n}","compare_result":"111111111111111","title_slug":"range-sum-query-mutable","has_notes":false,"flag_type":1}