{"id":1060382172,"question_id":1986,"lang":"java","lang_name":"Java","time":"8 months, 2 weeks","timestamp":1695804893,"status":10,"status_display":"Accepted","runtime":"358 ms","url":"/submissions/detail/1060382172/","is_pending":"Not Pending","title":"Largest Color Value in a Directed Graph","memory":"77.9 MB","code":"class Solution {\r\n    List<List<Integer>> g;\r\n    int[] inDegree;\r\n\r\n    public int largestPathValue(String colors, int[][] edges)  {\r\n        int ans = 1;\r\n        int len = colors.length();\r\n        inDegree = new int[len];\r\n        g = new ArrayList<>();\r\n        for(int i=0; i<len; i++){\r\n            g.add(new ArrayList<>());\r\n        }\r\n\r\n        for (int[] edge: edges){\r\n            int src = edge[0];\r\n            int dst = edge[1];\r\n            g.get(src).add(dst);\r\n            inDegree[dst]++;\r\n        }\r\n        \r\n        Set<Character> set = new HashSet<>();\r\n        for (char ch='a'; ch<='z'; ch++)\r\n        {\r\n            if(!set.add(ch)) continue;\r\n            int t = helper(ch, colors, edges);\r\n            if(t==-1) return -1; // contains cycle\r\n            ans = Math.max(ans, t);\r\n        }\r\n        return ans;        \r\n    }\r\n\r\n    private int helper(char ch, String colors, int[][] edges) {\r\n\r\n        int len = colors.length();\r\n        int[] count = new int[len];\r\n        int[] in = new int[len];\r\n\r\n        for (int i=0; i<len; i++)\r\n            in[i] = inDegree[i];\r\n        \r\n        int visited = 0;\r\n        Queue<Integer> q = new LinkedList<>();\r\n\r\n        for (int i=0; i<len; i++)\r\n        {\r\n            if (in[i]==0)\r\n            {\r\n                visited++;\r\n                if (colors.charAt(i)==ch) \r\n                    count[i]++;\r\n                q.offer(i);\r\n            }\r\n        }\r\n        \r\n        int ret = 0;\r\n        while (!q.isEmpty())\r\n        {\r\n            int cur = q.poll();\r\n            \r\n            for (int nxt: g.get(cur))\r\n            {\r\n                count[nxt] = Math.max(count[nxt], count[cur]+ (colors.charAt(nxt)==ch ? 1 : 0));                \r\n                ret = Math.max(ret, count[nxt]);                \r\n                in[nxt]--;\r\n                if (in[nxt]==0)\r\n                {                    \r\n                    visited++;\r\n                    q.offer(nxt);                 \r\n                }\r\n            }            \r\n        }\r\n        \r\n        if (visited!=len) return -1;\r\n        return ret;\r\n    }\r\n}","compare_result":"11111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"largest-color-value-in-a-directed-graph","has_notes":false,"flag_type":1}