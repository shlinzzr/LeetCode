{"id":876682852,"question_id":833,"lang":"java","lang_name":"Java","time":"1 year, 5 months","timestamp":1673514550,"status":10,"status_display":"Accepted","runtime":"64 ms","url":"/submissions/detail/876682852/","is_pending":"Not Pending","title":"Bus Routes","memory":"85.1 MB","code":"class Solution {\n    public int numBusesToDestination(int[][] routes, int source, int target) {\n        \n        \n        if(source==target)\n            return 0;\n        \n        \n        int rLen = routes.length;\n        \n        HashMap<Integer, Set<Integer>> rMap = new HashMap<>(); // routeId, set<busStop>\n        for(int i=0; i<rLen; i++){\n            rMap.put(i, new HashSet<>());\n            for(int b:routes[i])  \n                rMap.get(i).add(b);\n        }\n        \n        HashMap<Integer, Set<Integer>> bMap = new HashMap<>(); // busStop, set<routeId> \n        for(int i=0; i<rLen; i++){\n            \n            int[] busStops = routes[i];\n            \n            for(int b : busStops){\n                bMap.putIfAbsent(b, new HashSet<>());\n                bMap.get(b).add(i);\n            }\n        }\n        \n        \n        boolean[] token = new boolean[rLen];\n        Queue<Integer> q = new LinkedList<>(); // busStop\n        q.add(source);\n        \n        Set<Integer> srcRoutes = bMap.get(source);\n        for(int s: srcRoutes){\n            // token[s]=true;\n            \n            Set<Integer> bset = rMap.get(s);\n            if(bset.contains(target))\n                return 1;\n            \n        }\n        \n        \n        \n        \n        int cnt = 1;\n        \n        while(!q.isEmpty()){\n            \n            for(int i=q.size(); i>0; i--){\n                \n                int busStop = q.poll();\n                \n                Set<Integer> rset = bMap.get(busStop);\n                if(rset==null || rset.isEmpty())\n                    continue;\n                \n                // System.out.println(busStop + \" \" + rset.toString());\n                \n                for(int r : rset){\n                    \n                    if(token[r])\n                        continue;\n                    token[r]=true;\n                    \n                    Set<Integer> bset = rMap.get(r);\n                    \n                    if(bset.contains(target))\n                        return cnt;\n                    \n                    for(int b: bset){\n                        q.offer(b);\n                        // System.out.println(cnt + \" \" + busStop + \"->\" +b);\n                    }\n                }\n            }\n            \n            cnt++;\n            \n        }\n        \n        return -1;\n        \n    }\n}","compare_result":"1111111111111111111111111111111111111111111111","title_slug":"bus-routes","has_notes":false,"flag_type":1}