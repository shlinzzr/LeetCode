{"id":924097023,"question_id":381,"lang":"java","lang_name":"Java","time":"1 year, 2 months","timestamp":1680076007,"status":10,"status_display":"Accepted","runtime":"50 ms","url":"/submissions/detail/924097023/","is_pending":"Not Pending","title":"Insert Delete GetRandom O(1) - Duplicates allowed","memory":"83.8 MB","code":"class RandomizedCollection {\n    List<Integer> list;\n    HashMap<Integer, Set<Integer>> map;\n    \n    public RandomizedCollection() {\n        list = new ArrayList<Integer>();\n        map = new HashMap<Integer, Set<Integer>>();\n        \n    }\n    \n    public boolean insert(int val) {\n        \n       boolean res = map.containsKey(val) && map.get(val).size()>0;\n        \n       map.putIfAbsent(val, new HashSet<>());\n        \n        list.add(val);\n        map.get(val).add(list.size()-1);\n        \n        return !res;\n    }\n    \n    public boolean remove(int val) {\n        if(!map.containsKey(val))\n            return false;\n        if(map.get(val).size()==0)\n            return false;\n        \n        int remove_idx = map.get(val).iterator().next();\n        map.get(val).remove(remove_idx);\n        int last = list.get(list.size() - 1);\n        list.set(remove_idx, last);\n        map.get(last).add(remove_idx);\n        map.get(last).remove(list.size()-1);\n        \n        list.remove(list.size() - 1);\n        \n        // map.get(val).remove(map.get(val).size()-1);\n        // if(map.get(val).size()==0)\n        //     map.remove(val);\n        \n        \n        return true;\n        \n    }\n    \n    public int getRandom() {\n        // int key = (int)(Math.random() * len);\n        // int val = list.get(key);\n        // while(!map.containsKey(val) || map.get(val).size()==0){\n        //     key = (int)(Math.random() * len);\n        //     val = list.get(key);\n        // }\n        // return val;\n          return list.get((int) (Math.random()*list.size()));\n    }\n}\n\n/**\n * Your RandomizedCollection object will be instantiated and called as such:\n * RandomizedCollection obj = new RandomizedCollection();\n * boolean param_1 = obj.insert(val);\n * boolean param_2 = obj.remove(val);\n * int param_3 = obj.getRandom();\n */","compare_result":"11111111111111111111111111111111","title_slug":"insert-delete-getrandom-o1-duplicates-allowed","has_notes":false,"flag_type":1}