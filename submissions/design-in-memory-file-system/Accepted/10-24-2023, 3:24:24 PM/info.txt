{"id":1082803789,"question_id":588,"lang":"java","lang_name":"Java","time":"7 months, 3 weeks","timestamp":1698132264,"status":10,"status_display":"Accepted","runtime":"35 ms","url":"/submissions/detail/1082803789/","is_pending":"Not Pending","title":"Design In-Memory File System","memory":"44.5 MB","code":"class FileSystem {\n    \n    TrieNode root;\n    \n    class TrieNode{\n        TreeMap<String, TrieNode> map;\n        String self=\"\";\n        boolean isFile;\n        String content;\n        \n        public TrieNode(String self){\n            map= new TreeMap<>();\n            this.self = self;\n            isFile=false;      \n            content=null;\n        }\n    }\n    \n    \n    public FileSystem() {\n        root = new TrieNode(\"/\");\n        \n    }\n    \n    public List<String> ls(String path) {\n        //file , dir in lexicographic order\n        \n        List<String> res = new ArrayList<>();\n        TrieNode node = root;\n        \n        \n        if(!path.equals(\"/\")){\n            String[] arr = path.split(\"/\");\n            int i=1;\n            while(i<arr.length){\n                if(node.map.containsKey(arr[i])){\n                    node = node.map.get(arr[i]);\n                    i++;\n                }else{\n                    return new ArrayList<>();\n                }\n            }\n        }\n        \n        if(node.isFile==true){\n            res.add(node.self);\n        }else{\n            for(String k : node.map.keySet()){\n                res.add(k);\n            }\n        }\n        \n        return res;\n    }\n    \n    public void mkdir(String path) {\n        \n        String[] arr = path.split(\"/\");\n        TrieNode node = root;\n        int i=1;\n        \n        while(i<arr.length){\n            \n            if(!node.map.containsKey(arr[i])){\n                node.map.put(arr[i], new TrieNode(arr[i]));\n            }\n            node = node.map.get(arr[i]);\n            i++;\n        }\n        \n        \n        \n    }\n    \n    public void addContentToFile(String filePath, String content) {\n        \n        String[] arr = filePath.split(\"/\");\n        TrieNode node = root;\n        int i=1;\n        while(i<arr.length){\n            if(!node.map.containsKey(arr[i])){\n                node.map.put(arr[i], new TrieNode(arr[i]));\n            }\n            node = node.map.get(arr[i]);\n            i++;\n        }\n        node.isFile=true;\n        node.content= node.content==null? content: node.content + content;\n    }\n    \n    public String readContentFromFile(String filePath) {\n        \n        String[] arr = filePath.split(\"/\");\n        TrieNode node = root;\n        int i=1;\n        while(i<arr.length){\n            if(node.map.containsKey(arr[i])){\n                node = node.map.get(arr[i]);\n                i++;\n            }else{\n                return null;\n            }\n        }\n        \n        if(node.isFile==false)\n            return null;\n        \n        return node.content;\n        \n    }\n}\n\n/**\n * Your FileSystem object will be instantiated and called as such:\n * FileSystem obj = new FileSystem();\n * List<String> param_1 = obj.ls(path);\n * obj.mkdir(path);\n * obj.addContentToFile(filePath,content);\n * String param_4 = obj.readContentFromFile(filePath);\n */","compare_result":"111111111111111111111111111111111111111111111111111111111111111","title_slug":"design-in-memory-file-system","has_notes":false,"flag_type":1}