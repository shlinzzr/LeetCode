{"id":1263884516,"question_id":2574,"lang":"java","lang_name":"Java","time":"3 weeks, 1 day","timestamp":1716286076,"status":10,"status_display":"Accepted","runtime":"16 ms","url":"/submissions/detail/1263884516/","is_pending":"Not Pending","title":"Count Subarrays With Median K","memory":"55.6 MB","code":"class Solution {\n    public int countSubarrays(int[] nums, int k) {\n        int idx =0;\n        for(int i=0;i<nums.length;i++){\n            if(nums[i]==k){\n                idx = i;\n                break;\n            }\n        }\n\n        // 3 2 1 4 5\n        //-3-2-1 0 1\n\n        Map<Integer, Integer> map = new HashMap<>(); // sum, cnt\n        int sum =0;\n        for(int i =idx;i<nums.length;i++){ //從中位數往右找\n            sum += nums[i]==k? 0 : nums[i]<k? -1 :1;\n            map.put(sum, map.getOrDefault(sum,0)+1);\n        }\n        \n        // map : 0:1, 1:1\n\n\n        int res = 0;\n        sum =0;\n        for(int i= idx;i>=0.;i--){ //從中位數往左找\n            sum += nums[i]==k? 0 : nums[i]<k? -1 :1;\n            res+= map.getOrDefault(-sum,0) \n                 + map.getOrDefault(-sum+1,0);//因為 sum+(-sum+1)/2 也是median\n            \n            //比如說我現在sum到-6 那如果前有sum到5 那我也還算是median\n            // ex k = 4\n            //  3  2  1  2  0  1 4 5 6 7 8 9\n            // -6 -5 -4 -3 -2 -1 0 1 2 3 4 5\n\n\n            // [-1, 0, 1]   sum=0, median=0\n            // [-1, 0, 1, 1] sum=1, median=0\n        }\n        return res;\n    }\n    \n    \n    \n    // 1 [4, 5] \n    \n    //[2,3,1]\n    \n    // st=2 ed=2 k=3\n    \n    // private int extend(int[] nums, int st, int ed, int k){\n    //     int cnt=0;\n    //     int pre=0, post=0;\n        \n    //     int len = nums.length;\n        \n    //     while(st>=0 && ed<len && pre==post){\n            \n            \n            \n            \n    //         if(nums[st]==k || nums[ed]==k){\n    //             pre++;\n    //             post++;\n    //             st--;\n    //             ed++;\n    //             cnt++;\n    //             continue;\n    //         }\n            \n    //         if(nums[st]<k){\n    //             pre++;\n    //             st--;\n    //         }\n                \n            \n    //         if(nums[ed]>k){\n    //             post++;\n    //             ed++;\n    //         }\n            \n    //         if(pre==post)\n    //             cnt++;\n    //     }\n        \n    //     return cnt;\n        \n        \n    // }\n}","compare_result":"111111111111111111111111111111111111111111111","title_slug":"count-subarrays-with-median-k","has_notes":false,"flag_type":1}