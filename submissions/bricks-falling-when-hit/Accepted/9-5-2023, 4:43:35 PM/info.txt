{"id":1041055015,"question_id":821,"lang":"java","lang_name":"Java","time":"9 months, 1 week","timestamp":1693903415,"status":10,"status_display":"Accepted","runtime":"9 ms","url":"/submissions/detail/1041055015/","is_pending":"Not Pending","title":"Bricks Falling When Hit","memory":"57.8 MB","code":"class Solution {\n    private static final int TOP = 2;\n    private static final int BRICK = 1; \n    private static final int EMPTY = 0;\n    private static final int[][] DIRS = {{1, 0}, {-1, 0}, {0, 1}, {0, -1}};\n\n    public int[] hitBricks(int[][] grid, int[][] hits) {\n        int[] res = new int[hits.length];\n        // Think backwards: remove all of the hits and then add them back;\n        for (int[] hit : hits) {\n            grid[hit[0]][hit[1]]--;\n        }\n        \n        // Flood all the grids connecting to top with 2;\n        for (int j = 0; j < grid[0].length; j++) {\n            dfs(0, j, grid);\n        }\n        \n        // Add back the hited Bricks\n        for (int i = hits.length - 1; i >= 0; i--) {\n            int x = hits[i][0], y = hits[i][1];\n            grid[x][y]++;\n            if (grid[x][y] == BRICK && isConnected(x, y, grid)) {\n                res[i] = dfs(x, y, grid) - 1;\n            }\n        }\n        \n        return res;\n    }\n    \n    private int dfs(int i, int j, int[][] grid) {\n        if (i < 0 || i >= grid.length || j < 0 || j >= grid[0].length || grid[i][j] != BRICK) {\n            return 0;\n        }        \n        grid[i][j] = 2;\n        return dfs(i + 1, j, grid) \n             + dfs(i - 1, j, grid)\n             + dfs(i, j + 1, grid)\n             + dfs(i, j - 1, grid) + 1;\n    }\n    \n    private boolean isConnected(int i, int j, int[][] grid) {\n        if (i == 0) {\n            return true;\n        }       \n        for (int[] d : DIRS) {\n            int x = i + d[0], y = j + d[1];\n            if (x >= 0 && x < grid.length && y >= 0 && y < grid[0].length && grid[x][y] == TOP) {\n                return true;\n            }\n        }               \n        return false;\n    }\n}","compare_result":"1111111111111111111111111111111111111111","title_slug":"bricks-falling-when-hit","has_notes":false,"flag_type":1}