{"id":944278639,"question_id":2577,"lang":"java","lang_name":"Java","time":"1 year, 1 month","timestamp":1683192756,"status":10,"status_display":"Accepted","runtime":"137 ms","url":"/submissions/detail/944278639/","is_pending":"Not Pending","title":"Count Palindromic Subsequences","memory":"89.9 MB","code":"class Solution {\n    \n    \n    public int countPalindromes(String s) {\n        \n        int n = s.length();\n        \n        int M = (int)1e9+7;\n        \n        long[][][] dp1 = new long[n+1][10][10];\n        long[][] pre = new long[n+1][10];\n        \n        long[][][] dp2 = new long[n+1][10][10];\n        long[][] post = new long[n+1][10];\n        \n        \n        for (int j=0; j<=9; j++)\n        {\n            int sum = 0;\n            for (int i=1; i<=n; i++)\n            {\n               if(s.charAt(i-1)-'0'==j)\n                    sum++;\n               pre[i][j] = sum;\n            }\n        }\n        \n        \n        \n        for (int j=0; j<=9; j++)\n        {\n            int sum = 0;\n            for (int i=n; i>=1; i--)\n            {\n                if(s.charAt(i-1)-'0'==j)\n                    sum++;\n                post[i][j] = sum;\n            }\n        }        \n        \n        \n        \n        for (int i=2; i<=n; i++){\n            for (int j=0; j<=9; j++){\n                for (int k=0; k<=9; k++){\n                    dp1[i][j][k] = dp1[i-1][j][k];                    \n                    if(s.charAt(i-1)-'0'==k)             \n                        dp1[i][j][k] = (dp1[i][j][k] + pre[i-1][j]) % M;\n                }       \n            }\n        }\n        \n        \n        \n        \n        for (int i=n-1; i>=1; i--){\n            for (int j=0; j<=9; j++) {        \n                for (int k=0; k<=9; k++){\n                    dp2[i][j][k] = dp2[i+1][j][k];\n                    if(s.charAt(i-1)-'0'==k)                        \n                        dp2[i][j][k] = (dp2[i][j][k] + post[i+1][j]) % M;                    \n                }\n            }\n        }\n        \n        \n        int ret =0;\n        for (int i=3; i<=n-2; i++){\n            for (int j=0; j<=9; j++){\n                for (int k=0; k<=9; k++){\n                    ret += (dp1[i-1][j][k] * dp2[i+1][j][k] )% M;\n                    ret %= M;\n                }\n            }\n        }\n        \n        return ret%M;\n        \n        \n        /*\n        a. dp[i][j][k]  += dp[i-1][j][k]\n        b. if(s[i]==k){\n            dp[i][j][k]  += pre[i-1][j]\n        }\n        \n        \n        \n        */\n        \n    }\n      \n}","compare_result":"111111111111111111111111111111111111111111111111111111111111111","title_slug":"count-palindromic-subsequences","has_notes":false,"flag_type":1}