{"id":1268562593,"question_id":1695,"lang":"java","lang_name":"Java","time":"2 weeks, 3 days","timestamp":1716731734,"status":10,"status_display":"Accepted","runtime":"334 ms","url":"/submissions/detail/1268562593/","is_pending":"Not Pending","title":"Maximum Sum Obtained of Any Permutation","memory":"80.2 MB","code":"class Solution {\n    public int maxSumRangeQuery(int[] nums, int[][] requests) {\n        int M = (int) 1e9+7;\n\n        Arrays.sort(nums);\n\n        TreeMap<Integer, Integer> cntMap = new TreeMap<>();\n        for(int[] r : requests){\n            cntMap.put(r[0], cntMap.getOrDefault(r[0], 0)+1);\n            cntMap.put(r[1]+1, cntMap.getOrDefault(r[1]+1, 0)-1);\n        }\n\n        PriorityQueue<int[]> pq = new PriorityQueue<>( //  agg, wisth\n            (a,b)-> b[0] - a[0]\n        );\n\n\n        int agg = 0;\n        int prev = -1;\n        TreeMap<Integer, Integer> aggMap = new TreeMap<>();\n        for(int x: cntMap.keySet()){\n\n            if(prev!=-1){\n                int width = x-prev;\n                pq.offer(new int[]{agg, width});\n            }\n            agg += cntMap.get(x);\n            // System.out.println(\"x=\" + x +  \" agg=\" + agg);\n            aggMap.put(x, agg);\n            prev = x;\n        }\n\n        Arrays.sort(nums);\n        long[] presum = new long[nums.length+1];\n        for(int i=0; i<nums.length; i++){\n            presum[i+1] =  nums[i] + presum[i];\n        }\n\n\n        // 0 1 2 3 4 \n        //   |   |\n        // | |\n        //.4 5 3 2 1\n\n        // 10 + 4 + 3 +2\n\n        long res = 0;\n        for(int i=nums.length; i>0 && !pq.isEmpty(); i--){\n            int[] p = pq.poll();\n            int a = p[0];\n            int width = p[1];\n            \n            long sum = presum[i]-presum[i-width];\n            // System.out.println(a + \" \" + width+ \" \" + sum);\n            i= i-width+1;\n            res = (res + sum*a%M)%M;\n\n        }\n\n        return (int) res;\n\n\n       \n\n\n    }\n}","compare_result":"111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"maximum-sum-obtained-of-any-permutation","has_notes":false,"flag_type":1}