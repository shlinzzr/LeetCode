{"id":1120194820,"question_id":638,"lang":"java","lang_name":"Java","time":"6 months","timestamp":1702628890,"status":10,"status_display":"Accepted","runtime":"1044 ms","url":"/submissions/detail/1120194820/","is_pending":"Not Pending","title":"Shopping Offers","memory":"107.4 MB","code":"class Solution {\n    int[] memo;\n \n    public int shoppingOffers(List<Integer> price, List<List<Integer>> special, List<Integer> needs) {\n        int N = price.size();\n\n        memo = new int[1<<24];\n        List<List<Integer>> special2 = new ArrayList<>();\n        for(int i=0; i<special.size(); i++){\n            int sum=0;\n            for(int j=0; j<N; j++){\n                sum += special.get(i).get(j)*price.get(j);\n            }\n\n            if(sum>special.get(i).get(N)){\n                special2.add(special.get(i));\n            }\n        }\n\n        // 1 <= n <= 6\n        // 0 <= price[i], needs[i] <= 10, 要用4bit 來存\n\n        // xxxx xxxx xxxx xxxx xxxx        xxxx\n        //                     need.get(1) need.get(0)\n\n        int state = 0;\n        for(int j=0; j<N; j++){\n            state += needs.get(j)<<(j*4);\n        }\n\n        return dfs(state, special2, price);\n    }\n\n    private int dfs(int state, List<List<Integer>> special2, List<Integer> price){\n\n        if(state==0) return 0;\n        if(memo[state]!=0)  return memo[state];\n\n        int N = price.size();\n\n        int res = 0;\n\n        for(int j=0; j<N; j++){\n            res += ((state>>(j*4))%16)*price.get(j);\n        }\n\n        for(List<Integer> combo : special2){\n            boolean flag = true;\n\n            for(int j=0; j<N; j++){\n                if((state>>(j*4))%16 < combo.get(j)){\n                    flag=false;\n                    break;\n                }\n            }\n            if(flag==false) continue;\n\n            int state2 = state;\n            for(int j=0; j<N; j++){\n                state2 -= (combo.get(j)<<(j*4));\n            }\n            res = Math.min(res, combo.get(N) + dfs(state2, special2, price));\n\n        }\n        memo[state] = res;\n        return res;\n\n    }\n}","compare_result":"11111111111111111111111111111111111111111111111111111111111111111","title_slug":"shopping-offers","has_notes":false,"flag_type":1}