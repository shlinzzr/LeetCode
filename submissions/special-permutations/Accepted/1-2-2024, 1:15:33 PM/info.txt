{"id":1134311887,"question_id":2848,"lang":"java","lang_name":"Java","time":"5 months, 1 week","timestamp":1704172533,"status":10,"status_display":"Accepted","runtime":"668 ms","url":"/submissions/detail/1134311887/","is_pending":"Not Pending","title":"Special Permutations","memory":"51 MB","code":"class Solution {\n\n    int M = (int) 1e9+7;\n    Integer[][] dp ;\n\n    public int specialPerm(int[] nums) {\n        int len = nums.length;\n        dp = new Integer[1<<len][len];\n        for(int i=0; i<len ; i++) dp[i] = new Integer[len];\n\n        long rt = dfs(nums, 0, -1, 0, dp);\n\n        return (int) (rt%M);\n    }\n\n    private long dfs(int[] nums, int idx, int prev, int state, Integer[][]dp){\n\n        // System.out.println(\"dfs cnt=\"+cnt +  \" state=\"+state + \" list=\"+list);\n        if(idx>=nums.length) return 1;\n        if(prev!=-1 && dp[state][prev]!=null) {\n            //  System.out.println(\"dp[state]=\"+ dp[state]);\n             return dp[state][prev];\n        }\n        long res = 0;\n        for(int j=0; j<nums.length; j++){\n            if((state & (1<<j))==0 && (state==0 || nums[prev]%nums[j]==0 || nums[j]%nums[prev]==0)){\n                int newState = state | (1<<j);\n                // System.out.println(\"cnt=\"+cnt + \" j=\"+j + \" state=\" + state + \" newState=\"+newState);\n                res = (res + dfs(nums, idx+1, j, newState, dp)%M)%M;\n                \n            }\n        }\n\n        if(prev!=-1)dp[state][prev] = (int)(res%M);\n        return res%M;\n    }\n\n}","compare_result":"11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"special-permutations","has_notes":false,"flag_type":1}