{"id":1040845853,"question_id":716,"lang":"java","lang_name":"Java","time":"9 months, 1 week","timestamp":1693883046,"status":15,"status_display":"Runtime Error","runtime":"N/A","url":"/submissions/detail/1040845853/","is_pending":"Not Pending","title":"Max Stack","memory":"N/A","code":"class MaxStack {\n\n    Node head;\n    TreeMap<Integer, LinkedList<Node>> map; // val, List<node>\n    \n    class Node{\n        Integer val;\n        Node next;\n        Node prev;\n        public Node(Integer val){\n            this.val = val;\n        }\n    }\n    \n    \n    \n    public MaxStack() {\n        map = new TreeMap<>();\n        head = new Node(null);\n        head.next = head;\n        head.prev = head;\n    }\n    \n    public void push(int x) {\n        \n        Node node = new Node(x);\n        node.next = head;\n        head.prev = node;\n        head = node;\n        \n        map.putIfAbsent(x, new LinkedList<Node>());\n        map.get(x).add(node);\n        \n    }\n    \n    public int pop() {\n        \n        Node tail = head.prev;\n        if(tail==head)\n            return 0;\n        \n        deleteNode(tail);\n        map.get(tail.val).removeLast();\n        if(map.get(tail.val).isEmpty())\n            map.remove(tail.val);\n        \n        return tail.val;\n    }\n    \n    private void deleteNode(Node node){\n        node.prev.next = node.next;\n        node.next.prev = node.prev;\n    }\n    \n    public int top() {\n        return head.prev.val;\n    }\n    \n    public int peekMax() {\n        return map.lastKey();\n    }\n    \n    public int popMax() {\n        int max = this.peekMax();\n        Node node = map.get(max).removeLast();\n        return max;\n    }\n}\n\n\n// 5 1 5\n// top 5 \n// popmax  :  5\n// top\n\n\n/**\n * Your MaxStack object will be instantiated and called as such:\n * MaxStack obj = new MaxStack();\n * obj.push(x);\n * int param_2 = obj.pop();\n * int param_3 = obj.top();\n * int param_4 = obj.peekMax();\n * int param_5 = obj.popMax();\n */","compare_result":"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","title_slug":"max-stack","has_notes":false,"flag_type":1}